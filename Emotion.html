<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>Emotions-Navi mit Bibelvers</title>
  <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

  <style>
    :root {
      --bg: #020617;
      --card: #020617;
      --accent-main: #38bdf8;  /* sanftes Blau */
      --accent-soft: #22c55e;  /* weiches Gr√ºn */
      --accent-rose: #fb7185;
      --text-main: #f9fafb;
      --text-muted: #9ca3af;
      --border-subtle: #1f2937;
      --shadow-soft: 0 18px 40px rgba(0,0,0,0.6);
      --radius-xl: 18px;
    }

    * {
      box-sizing: border-box;
    }

    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      background:
        radial-gradient(circle at top, #0f172a 0, #020617 50%, #000 100%);
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      color: var(--text-main);
      -webkit-text-size-adjust: 100%;
    }

    body {
      display: flex;
      justify-content: center;
      align-items: stretch;
    }

    .app {
      width: 100%;
      max-width: 480px;
      padding: 16px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    header {
      text-align: center;
      padding-top: 4px;
    }

    header h1 {
      margin: 4px 0;
      font-size: 22px;
      letter-spacing: 0.03em;
    }

    header p {
      margin: 0;
      font-size: 13px;
      color: var(--text-muted);
    }

    .card {
      background:
        radial-gradient(circle at top left, rgba(56,189,248,0.1), transparent 55%),
        radial-gradient(circle at bottom right, rgba(34,197,94,0.06), transparent 55%),
        #020617;
      border-radius: var(--radius-xl);
      padding: 14px;
      box-shadow: var(--shadow-soft);
      border: 1px solid var(--border-subtle);
      display: flex;
      flex-direction: column;
      gap: 10px;
      min-height: 280px;
    }

    .badge-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      font-size: 11px;
      color: var(--text-muted);
    }

    .badge {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 3px 8px;
      border-radius: 999px;
      background: rgba(15,23,42,0.85);
      border: 1px solid #1f2937;
    }

    .badge-dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: var(--accent-main);
    }

    .badge-soft {
      padding: 3px 8px;
      border-radius: 999px;
      background: rgba(15,23,42,0.5);
      border: 1px dashed #1f2937;
    }

    .title {
      font-size: 18px;
      font-weight: 600;
    }

    .calm-phrase {
      font-size: 12px;
      color: var(--accent-main);
      margin-top: -4px;
      margin-bottom: 4px;
    }

    .text {
      font-size: 14px;
      color: #e5e7eb;
      white-space: pre-wrap;
    }

    .tile-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 8px;
      margin-top: 4px;
    }

    .tile {
      border-radius: 14px;
      padding: 9px 10px;
      font-size: 13px;
      font-weight: 500;
      border: 1px solid rgba(148,163,184,0.35);
      background:
        radial-gradient(circle at top left, rgba(148,163,184,0.15), transparent 60%);
      color: var(--text-main);
      cursor: pointer;
      display: flex;
      align-items: flex-start;
      gap: 6px;
      line-height: 1.3;
      box-shadow: 0 6px 18px rgba(0,0,0,0.45);
      transition:
        transform 0.08s ease,
        box-shadow 0.08s ease,
        border-color 0.08s ease,
        background 0.08s ease;
    }

    .tile span.emoji {
      font-size: 16px;
      flex-shrink: 0;
      margin-top: -1px;
    }

    .tile span.label {
      flex: 1;
    }

    .tile:active {
      transform: translateY(1px) scale(0.99);
      box-shadow: 0 3px 10px rgba(0,0,0,0.4);
      border-color: rgba(248,250,252,0.25);
    }

    .tile.selected {
      border-color: rgba(56,189,248,0.9);
      background:
        radial-gradient(circle at top left, rgba(56,189,248,0.25), transparent 65%);
      box-shadow: 0 10px 26px rgba(56,189,248,0.35);
    }

    .tile.cause {
      border-color: rgba(52,211,153,0.65);
      background:
        radial-gradient(circle at top left, rgba(52,211,153,0.23), transparent 65%);
    }

    .tile.action {
      border-color: rgba(248,250,252,0.35);
      background:
        radial-gradient(circle at top left, rgba(148,163,184,0.2), transparent 60%);
    }

    .summary-box {
      margin-top: 4px;
      padding: 8px;
      border-radius: 12px;
      background: rgba(15,23,42,0.9);
      border: 1px solid #1f2937;
      font-size: 13px;
      color: #e5e7eb;
      white-space: pre-wrap;
    }

    .hint {
      font-size: 12px;
      color: var(--text-muted);
      margin-top: 2px;
    }

    .verse-box {
      margin-top: 6px;
      padding: 10px;
      border-radius: 14px;
      border: 1px solid rgba(56,189,248,0.5);
      background:
        radial-gradient(circle at top left, rgba(56,189,248,0.16), transparent 60%);
      font-size: 13px;
    }

    .verse-ref {
      font-weight: 600;
      color: var(--accent-main);
      margin-bottom: 4px;
    }

    .verse-text {
      font-size: 13px;
    }

    .nav-row {
      display: flex;
      justify-content: space-between;
      gap: 8px;
      margin-top: 8px;
    }

    .nav-btn {
      flex: 1;
      border-radius: 999px;
      padding: 8px 10px;
      font-size: 13px;
      border: none;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 4px;
      transition: opacity 0.1s ease, transform 0.08s ease;
    }

    .nav-btn span.icon {
      font-size: 14px;
    }

    .nav-btn.secondary {
      background: rgba(15,23,42,0.9);
      color: var(--text-muted);
      border: 1px solid #1f2937;
    }

    .nav-btn.primary {
      background: var(--accent-main);
      color: #020617;
      font-weight: 600;
    }

    .nav-btn:disabled {
      opacity: 0.4;
      cursor: default;
    }

    .nav-btn.primary:active:not(:disabled),
    .nav-btn.secondary:active:not(:disabled) {
      transform: translateY(1px) scale(0.99);
    }

    footer {
      font-size: 11px;
      color: var(--text-muted);
      text-align: center;
      padding-bottom: 4px;
    }

    @media (max-width: 380px) {
      .tile-grid {
        grid-template-columns: repeat(1, minmax(0, 1fr));
      }
    }
  </style>
</head>
<body>
<div class="app">
  <header>
    <h1>Emotions-Navi</h1>
    <p>Eine ruhige Reise durch deine Gef√ºhle ‚Äì mit Gott an deiner Seite.</p>
  </header>

  <div class="card">
    <div class="badge-row">
      <div class="badge">
        <div class="badge-dot"></div>
        <span id="badge-label">Schritt 1 von 8</span>
      </div>
      <div class="badge-soft" id="step-label"></div>
    </div>

    <div class="title" id="title">Welche Emotion ist gerade da?</div>
    <div class="calm-phrase" id="calm-phrase"></div>
    <div class="text" id="text"></div>

    <div class="tile-grid" id="tile-grid"></div>

    <div class="hint" id="hint"></div>

    <div class="verse-box" id="verse-box" style="display:none;">
      <div class="verse-ref" id="verse-ref"></div>
      <div class="verse-text" id="verse-text"></div>
    </div>

    <div class="summary-box" id="summary-box" style="display:none;"></div>

    <div class="nav-row">
      <button class="nav-btn secondary" id="back-btn">
        <span class="icon">‚Üê</span><span>Zur√ºck</span>
      </button>
      <button class="nav-btn primary" id="next-btn">
        <span id="next-label">Weiter</span><span class="icon">‚Üí</span>
      </button>
    </div>
  </div>

  <footer>
    Du musst nichts perfekt machen. Ehrliche 2‚Äì3 Minuten mit dir selbst sind genug.
  </footer>
</div>

<script>
  const state = {
    step: 1,
    emotions: [],
    mainEmotion: null,
    cause: null,
    actions: []
  };

  const calmPhrases = [
    "Du musst jetzt nichts leisten. Atmen reicht.",
    "Gott kennt jedes Gef√ºhl in dir ‚Äì auch die, die du kaum benennen kannst.",
    "Gef√ºhle sind Informationen, keine Feinde.",
    "Du darfst so f√ºhlen, wie du dich gerade f√ºhlst.",
    "Nicht alles, was laut in dir ist, geh√∂rt dir f√ºr immer.",
    "Du bist gerade nicht allein ‚Äì auch wenn es sich so anf√ºhlt."
  ];

  const emotionOptions = [
    { id: "wuetend",      label: "W√ºtend",       emoji: "üò°" },
    { id: "genervt",      label: "Genervt",      emoji: "üò§" },
    { id: "reizbar",      label: "Reizbar",      emoji: "üí¢" },
    { id: "traurig",      label: "Traurig",      emoji: "üò¢" },
    { id: "enttaeuscht",  label: "Entt√§uscht",   emoji: "üòû" },
    { id: "einsam",       label: "Einsam",       emoji: "üåë" },
    { id: "aengstlich",   label: "√Ñngstlich",    emoji: "üò∞" },
    { id: "unsicher",     label: "Unsicher",     emoji: "ü§î" },
    { id: "schuldig",     label: "Schuldig",     emoji: "üòî" },
    { id: "schaemend",    label: "Besch√§mt",     emoji: "üò≥" },
    { id: "ueberfordert", label: "√úberfordert",  emoji: "üòµ" },
    { id: "leer",         label: "Leer",         emoji: "üï≥Ô∏è" },
    { id: "hoffnungslos", label: "Hoffnungslos", emoji: "üïØÔ∏è" },
    { id: "nervoes",      label: "Nerv√∂s",       emoji: "üò¨" },
    { id: "kontrollverlust", label: "Kontrollverlust", emoji: "üé¢" },
    { id: "innerlich_unruhig", label: "Innerlich unruhig", emoji: "üåä" }
  ];

  const causeOptions = [
    {
      id: "kindheit",
      label: "Kindheit / fr√ºhe Erfahrungen",
      emoji: "üßí"
    },
    {
      id: "verletzung_menschen",
      label: "Verletzung durch andere Menschen",
      emoji: "üíî"
    },
    {
      id: "konflikt_aktuell",
      label: "Streit oder Konflikt jetzt gerade",
      emoji: "üí•"
    },
    {
      id: "ueberforderung",
      label: "Zu viel Verantwortung / Aufgaben",
      emoji: "üì¶"
    },
    {
      id: "angst_zukunft",
      label: "Sorge um Zukunft / Versorgung",
      emoji: "üìÖ"
    },
    {
      id: "unbekannt",
      label: "Ich wei√ü nicht genau warum",
      emoji: "üå´Ô∏è"
    }
  ];

  const actionOptions = [
    { id: "aufschreiben", label: "Gedanken aufschreiben", emoji: "‚úçÔ∏è" },
    { id: "reden", label: "Mit einer vertrauten Person reden", emoji: "üó£Ô∏è" },
    { id: "pause", label: "5 Minuten bewusste Pause machen", emoji: "‚òï" },
    { id: "beten", label: "Mit Gott dar√ºber reden", emoji: "üôè" },
    { id: "grenze", label: "Eine liebevolle Grenze setzen", emoji: "üöß" },
    { id: "spazieren", label: "Kurz rausgehen / spazieren", emoji: "üö∂" },
    { id: "atmen", label: "Drei ruhige Atemz√ºge nehmen", emoji: "üå¨Ô∏è" },
    { id: "musik", label: "Eine ruhige Playlist anmachen", emoji: "üéß" }
  ];

  const verseBox = document.getElementById("verse-box");
  const verseRefEl = document.getElementById("verse-ref");
  const verseTextEl = document.getElementById("verse-text");

  function getVerseForCause(causeId) {
    switch (causeId) {
      case "kindheit":
        return {
          ref: "Psalm 34,19",
          text: "Gott ist denen nahe, deren Herz zerbrochen ist. Er √ºbersieht deine alten Wunden nicht."
        };
      case "verletzung_menschen":
        return {
          ref: "Psalm 147,3",
          text: "Gott heilt zerbrochene Herzen und verbindet ihre Wunden ‚Äì auch deine."
        };
      case "konflikt_aktuell":
        return {
          ref: "Jakobus 1,19",
          text: "Gott l√§dt dich ein, zuerst zu h√∂ren, dann zu reden ‚Äì und nicht aus der Wut heraus zu handeln."
        };
      case "ueberforderung":
        return {
          ref: "Matth√§us 11,28",
          text: "Jesus ruft die M√ºden zu sich. Du darfst deine Last bei ihm ablegen ‚Äì du musst sie nicht allein tragen."
        };
      case "angst_zukunft":
        return {
          ref: "Jesaja 41,10",
          text: "F√ºrchte dich nicht, denn Gott ist bei dir. Er h√§lt dich fest, auch wenn du die Zukunft nicht im Griff hast."
        };
      case "unbekannt":
      default:
        return {
          ref: "R√∂mer 8,26",
          text: "Selbst wenn dir die Worte fehlen, wei√ü Gott, was in dir ist. Er versteht dein Seufzen."
        };
    }
  }

  const badgeEl = document.getElementById("badge-label");
  const stepLabelEl = document.getElementById("step-label");
  const titleEl = document.getElementById("title");
  const textEl = document.getElementById("text");
  const phraseEl = document.getElementById("calm-phrase");
  const gridEl = document.getElementById("tile-grid");
  const hintEl = document.getElementById("hint");
  const summaryBoxEl = document.getElementById("summary-box");
  const backBtn = document.getElementById("back-btn");
  const nextBtn = document.getElementById("next-btn");
  const nextLabel = document.getElementById("next-label");

  function pickRandom(arr) {
    return arr[Math.floor(Math.random() * arr.length)];
  }

  function setStep(step) {
    state.step = step;
    render();
  }

  function render() {
    const step = state.step;
    badgeEl.textContent = `Schritt ${step} von 8`;
    phraseEl.textContent = pickRandom(calmPhrases);
    gridEl.innerHTML = "";
    hintEl.textContent = "";
    verseBox.style.display = "none";
    summaryBoxEl.style.display = "none";

    backBtn.disabled = step === 1;
    nextBtn.disabled = false;
    nextLabel.textContent = (step === 8) ? "Neu starten" : "Weiter";

    if (step === 1) {
      stepLabelEl.textContent = "Ankommen";
      titleEl.textContent = "Welche Emotion ist gerade da?";
      textEl.textContent =
        "Du musst jetzt nichts erkl√§ren, nichts beweisen, nichts leisten.\n\n" +
        "Gleich kannst du ausw√§hlen, was du f√ºhlst. Es geht nicht darum, ob das \"logisch\" ist ‚Äì " +
        "sondern darum, ehrlich mit dir zu sein.";
      hintEl.textContent = "Wenn du bereit bist, tippe auf ‚ÄûWeiter‚Äú.";

    } else if (step === 2) {
      stepLabelEl.textContent = "Gef√ºhle sammeln";
      titleEl.textContent = "Was f√ºhlst du gerade?";
      textEl.textContent =
        "Tippe alle Emotionen an, die gerade in dir da sind. Maximal drei.\n" +
        "Du kannst eine Emotion durch erneutes Tippen wieder abw√§hlen.";

      emotionOptions.forEach(opt => {
        const btn = document.createElement("button");
        btn.className = "tile";
        if (state.emotions.includes(opt.id)) {
          btn.classList.add("selected");
        }
        btn.innerHTML = `
          <span class="emoji">${opt.emoji}</span>
          <span class="label">${opt.label}</span>
        `;
        btn.addEventListener("click", () => toggleEmotion(opt.id));
        gridEl.appendChild(btn);
      });

      const count = state.emotions.length;
      hintEl.textContent = `Ausgew√§hlte Emotionen: ${count} von 3`;
      nextBtn.disabled = count === 0;

    } else if (step === 3) {
      stepLabelEl.textContent = "Fokus setzen";
      const count = state.emotions.length;
      const names = state.emotions
        .map(id => emotionOptions.find(o => o.id === id)?.label)
        .filter(Boolean)
        .join(", ");

      titleEl.textContent = "Welche Emotion ist am st√§rksten?";
      textEl.textContent =
        `Du hast ${count} Emotion${count > 1 ? "en" : ""} ausgew√§hlt:\n${names}.\n\n` +
        "Welche davon f√ºhlt sich gerade am intensivsten an?";

      state.emotions.forEach(id => {
        const opt = emotionOptions.find(o => o.id === id);
        if (!opt) return;
        const btn = document.createElement("button");
        btn.className = "tile";
        if (state.mainEmotion === id) {
          btn.classList.add("selected");
        }
        btn.innerHTML = `
          <span class="emoji">${opt.emoji}</span>
          <span class="label">${opt.label}</span>
        `;
        btn.addEventListener("click", () => {
          state.mainEmotion = id;
          render();
        });
        gridEl.appendChild(btn);
      });

      nextBtn.disabled = !state.mainEmotion;
      hintEl.textContent = "W√§hle die Emotion, die am lautesten in dir ist.";

    } else if (step === 4) {
      stepLabelEl.textContent = "Ursache sp√ºren";
      const mainName = getEmotionName(state.mainEmotion) || "deine Emotion";
      titleEl.textContent = `Worum geht es tief in deiner ${mainName}?`;
      textEl.textContent =
        "Manchmal steckt hinter einem starken Gef√ºhl eine tiefere Wurzel.\n\n" +
        "W√§hle die Option, die sich am ehesten richtig anf√ºhlt ‚Äì auch wenn sie nur ungef√§hr passt.";

      causeOptions.forEach(opt => {
        const btn = document.createElement("button");
        btn.className = "tile cause";
        if (state.cause === opt.id) {
          btn.classList.add("selected");
        }
        btn.innerHTML = `
          <span class="emoji">${opt.emoji}</span>
          <span class="label">${opt.label}</span>
        `;
        btn.addEventListener("click", () => {
          state.cause = opt.id;
          render();
        });
        gridEl.appendChild(btn);
      });

      nextBtn.disabled = !state.cause;
      hintEl.textContent = "Du kannst das sp√§ter jederzeit anders sehen ‚Äì das hier ist nur ein erster Blick.";

    } else if (step === 5) {
      stepLabelEl.textContent = "Ermutigung";
      const mainName = getEmotionName(state.mainEmotion) || "deine Emotion";
      titleEl.textContent = "Dein Gef√ºhl macht Sinn.";
      textEl.textContent = getCauseText(mainName, state.cause);
      hintEl.textContent = "Lies dir das in Ruhe durch. Du musst nichts tun ‚Äì nur aufnehmen.";

    } else if (step === 6) {
      stepLabelEl.textContent = "Bibelvers";
      const verse = getVerseForCause(state.cause);
      const mainName = getEmotionName(state.mainEmotion) || "dein Gef√ºhl";

      titleEl.textContent = "Ein Vers nur f√ºr diesen Moment";
      textEl.textContent =
        "Gott ist nicht √ºberrascht von " + mainName.toLowerCase() + " in dir.\n\n" +
        "Dieser Vers soll dich nicht belehren, sondern dich erinnern: Du bist gesehen.";

      verseBox.style.display = "block";
      verseRefEl.textContent = verse.ref;
      verseTextEl.textContent = verse.text;

      hintEl.textContent = "Wenn du willst, kannst du den Vers langsam einmal laut lesen.";

    } else if (step === 7) {
      stepLabelEl.textContent = "N√§chste Schritte";
      titleEl.textContent = "Wie willst du jetzt gut f√ºr dich sorgen?";
      textEl.textContent =
        "W√§hle ein oder mehrere Schritte, die sich gerade machbar anf√ºhlen.\n" +
        "Sie m√ºssen nicht gro√ü sein. Kleine, ehrliche Schritte sind stark.";

      actionOptions.forEach(opt => {
        const btn = document.createElement("button");
        btn.className = "tile action";
        if (state.actions.includes(opt.id)) {
          btn.classList.add("selected");
        }
        btn.innerHTML = `
          <span class="emoji">${opt.emoji}</span>
          <span class="label">${opt.label}</span>
        `;
        btn.addEventListener("click", () => toggleAction(opt.id));
        gridEl.appendChild(btn);
      });

      const count = state.actions.length;
      hintEl.textContent = count === 0
        ? "W√§hle mindestens einen kleinen Schritt."
        : `Ausgew√§hlte Schritte: ${count}`;
      nextBtn.disabled = count === 0;

    } else if (step === 8) {
      stepLabelEl.textContent = "Zusammenfassung";
      titleEl.textContent = "Das hast du gerade mit dir angeschaut:";
      textEl.textContent =
        "Das ist kein Urteil, keine Diagnose ‚Äì nur ein ehrlicher Spiegel f√ºr diesen Moment.";

      const summaryText = buildSummary();
      summaryBoxEl.textContent = summaryText;
      summaryBoxEl.style.display = "block";

      const verse = getVerseForCause(state.cause);
      verseBox.style.display = "block";
      verseRefEl.textContent = "Dein Vers f√ºr diesen Weg: " + verse.ref;
      verseTextEl.textContent = verse.text;

      hintEl.textContent =
        "Wenn du magst, kannst du dir einen Satz daraus merken und mit in deinen Alltag nehmen.";
    }
  }

  function getEmotionName(id) {
    const e = emotionOptions.find(o => o.id === id);
    return e ? e.label : null;
  }

  function toggleEmotion(id) {
    const idx = state.emotions.indexOf(id);
    if (idx >= 0) {
      state.emotions.splice(idx, 1);
    } else {
      if (state.emotions.length >= 3) return;
      state.emotions.push(id);
    }
    if (!state.emotions.includes(state.mainEmotion)) {
      state.mainEmotion = null;
    }
    render();
  }

  function toggleAction(id) {
    const idx = state.actions.indexOf(id);
    if (idx >= 0) {
      state.actions.splice(idx, 1);
    } else {
      state.actions.push(id);
    }
    render();
  }

  function getCauseText(mainName, causeId) {
    switch (causeId) {
      case "kindheit":
        return (
          "Ja, deine Kindheit und fr√ºhen Erfahrungen k√∂nnen tiefe Spuren hinterlassen.\n\n" +
          mainName + " ist nicht peinlich oder √ºbertrieben ‚Äì sie ist ein Signal: " +
          "Hier ist etwas in dir, das damals zu gro√ü war, um es allein zu tragen.\n\n" +
          "Der Unterschied zu fr√ºher: Heute bist du erwachsen. " +
          "Du bist nicht mehr ausgeliefert wie ein Kind. Du darfst Grenzen setzen, Hilfe holen, " +
          "dich sch√ºtzen lassen.\n\n" +
          "Das innere Kind in dir darf f√ºhlen ‚Äì und der erwachsene Teil darf liebevoll f√ºr es einstehen."
        );
      case "verletzung_menschen":
        return (
          "Wenn Menschen uns verletzen, trifft das oft mitten ins Herz. " +
          mainName + " ist dann wie ein innerer Alarm: \"So wollte ich nicht behandelt werden.\"\n\n" +
          "Vielleicht warst du ehrlich, treu oder offen ‚Äì und wurdest nicht ernst genommen, √ºbergangen oder ausgenutzt.\n\n" +
          "Du darfst traurig, entt√§uscht und w√ºtend sein. Das bedeutet nicht, dass du unspirituell bist ‚Äì " +
          "es bedeutet, dass du ein Herz hast.\n\n" +
          "Und dieses Herz ist Gott nicht egal."
        );
      case "konflikt_aktuell":
        return (
          "Ein aktueller Konflikt frisst Energie. " +
          mainName + " zeigt dir: Hier stimmt gerade etwas nicht f√ºr dich.\n\n" +
          "Vielleicht f√ºhlst du dich missverstanden, angegriffen oder ungerecht behandelt. " +
          "Vielleicht hast du auch selbst Dinge gesagt, die du so nicht wolltest.\n\n" +
          "Du musst nicht sofort alles kl√§ren.\n\n" +
          "Oft hilft es, zuerst innerlich zur Ruhe zu kommen, bevor man wieder in ein Gespr√§ch geht: " +
          "Was willst du wirklich sagen? Was ist dir wichtig? Was ist dein Anteil ‚Äì und was nicht?"
        );
      case "ueberforderung":
        return (
          "√úberforderung bedeutet nicht, dass du versagt hast ‚Äì sondern dass du zu viel tr√§gst.\n\n" +
          mainName + " ist ein ehrliches Signal deines Systems: \"Es ist zu viel.\"\n\n" +
          "Du bist kein Roboter. Du hast Grenzen ‚Äì und sie sind von Gott gedacht.\n\n" +
          "Du darfst Aufgaben abgeben, Priorit√§ten setzen, auch mal \"Nein\" sagen ‚Äì " +
          "selbst wenn andere das nicht sofort verstehen.\n\n" +
          "Du bist wertvoll, auch wenn du nicht alles schaffst."
        );
      case "angst_zukunft":
        return (
          "Angst vor der Zukunft kann das Jetzt vergiften. " +
          mainName + " zeigt, dass dir etwas wichtig ist: Sicherheit, Versorgung, Menschen, die du liebst.\n\n" +
          "Du musst die ganze Zukunft nicht heute l√∂sen.\n\n" +
          "Du darfst deinen Blick kleiner machen: Was ist der n√§chste liebevolle Schritt ‚Äì heute oder morgen? " +
          "Wer k√∂nnte dich begleiten? Woran erinnerst du dich, wo Gott dich schon einmal durchgetragen hat?\n\n" +
          "Deine Angst darf da sein ‚Äì und trotzdem bist du nicht ausgeliefert."
        );
      case "unbekannt":
      default:
        return (
          "Manchmal ist da einfach nur ein schweres, wirres Gef√ºhl ‚Äì und du wei√üt gar nicht genau, warum.\n\n" +
          "Auch dann ist " + mainName.toLowerCase() + " nicht sinnlos. Sie zeigt: Da ist etwas in dir, das Aufmerksamkeit braucht.\n\n" +
          "Du musst es heute nicht komplett verstehen.\n\n" +
          "Allein, dass du kurz inneh√§ltst, hinsp√ºrst und dich nicht ablenkst, ist bereits ein Schritt in Richtung Heilung."
        );
    }
  }

  function buildSummary() {
    const lines = [];
    const emotionNames = state.emotions
      .map(id => emotionOptions.find(o => o.id === id)?.label)
      .filter(Boolean);

    if (emotionNames.length) {
      lines.push(
        "Du hast dir folgende Emotionen ehrlich angeschaut:\n" +
        "‚Ä¢ " + emotionNames.join("\n‚Ä¢ ")
      );
    }

    if (state.mainEmotion) {
      const mainName = getEmotionName(state.mainEmotion);
      if (mainName) {
        lines.push("\nAm st√§rksten sp√ºrst du gerade: " + mainName + ".");
      }
    }

    if (state.cause) {
      const causeName = causeOptions.find(c => c.id === state.cause)?.label;
      if (causeName) {
        lines.push("Tiefer Zusammenhang, den du gesp√ºrt hast: " + causeName + ".");
      }
    }

    if (state.actions.length) {
      const actionTexts = state.actions
        .map(id => actionOptions.find(a => a.id === id)?.label)
        .filter(Boolean);
      if (actionTexts.length) {
        lines.push(
          "\nDeine gew√§hlten n√§chsten Schritte:\n" +
          "‚Ä¢ " + actionTexts.join("\n‚Ä¢ ")
        );
      }
    }

    lines.push(
      "\nDu musst nicht perfekt reagieren.\n" +
      "Ein ehrlicher kleiner Schritt in deine Richtung ist schon Ver√§nderung."
    );

    return lines.join("\n");
  }

  backBtn.addEventListener("click", () => {
    if (state.step > 1) {
      setStep(state.step - 1);
    }
  });

  nextBtn.addEventListener("click", () => {
    if (state.step === 8) {
      state.step = 1;
      state.emotions = [];
      state.mainEmotion = null;
      state.cause = null;
      state.actions = [];
      render();
      return;
    }
    if (state.step === 1) setStep(2);
    else if (state.step === 2) setStep(3);
    else if (state.step === 3) setStep(4);
    else if (state.step === 4) setStep(5);
    else if (state.step === 5) setStep(6);
    else if (state.step === 6) setStep(7);
    else if (state.step === 7) setStep(8);
  });

  setStep(1);
</script>
</body>
</html>
