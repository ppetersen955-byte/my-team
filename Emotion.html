<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>Emotionen & Bibel-Navi</title>
  <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

  <style>
    :root {
      --bg: #020617;
      --card: #0b1120;
      --accent-orange: #f97316;
      --accent-blue: #38bdf8;
      --accent-green: #22c55e;
      --accent-rose: #fb7185;
      --text-main: #f9fafb;
      --text-muted: #9ca3af;
      --border-subtle: #1f2937;
      --shadow-soft: 0 16px 40px rgba(0,0,0,0.5);
      --radius-xl: 18px;
    }

    * {
      box-sizing: border-box;
    }

    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      background: radial-gradient(circle at top, #1e293b 0, #020617 50%, #000 100%);
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      color: var(--text-main);
      -webkit-text-size-adjust: 100%;
    }

    body {
      display: flex;
      justify-content: center;
      align-items: stretch;
    }

    .app {
      width: 100%;
      max-width: 480px;
      padding: 16px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    header {
      text-align: center;
      padding-top: 4px;
    }

    header h1 {
      margin: 4px 0;
      font-size: 22px;
      letter-spacing: 0.03em;
    }

    header p {
      margin: 0;
      font-size: 13px;
      color: var(--text-muted);
    }

    .card {
      background: linear-gradient(145deg, #020617, #020617, #0b1120);
      border-radius: var(--radius-xl);
      padding: 14px;
      box-shadow: var(--shadow-soft);
      border: 1px solid var(--border-subtle);
      display: flex;
      flex-direction: column;
      gap: 10px;
      min-height: 260px;
    }

    .badge-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      font-size: 11px;
      color: var(--text-muted);
    }

    .badge {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 3px 8px;
      border-radius: 999px;
      background: rgba(15,23,42,0.8);
      border: 1px solid #1f2937;
    }

    .badge-dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: var(--accent-rose);
    }

    .badge-soft {
      padding: 3px 8px;
      border-radius: 999px;
      background: rgba(15,23,42,0.5);
      border: 1px dashed #1f2937;
    }

    .title {
      font-size: 17px;
      font-weight: 600;
    }

    .calm-phrase {
      font-size: 12px;
      color: var(--accent-blue);
      margin-top: -4px;
      margin-bottom: 4px;
    }

    .text {
      font-size: 14px;
      color: #e5e7eb;
      white-space: pre-wrap;
    }

    .tile-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 8px;
      margin-top: 4px;
    }

    .tile {
      border-radius: 14px;
      padding: 9px 10px;
      font-size: 13px;
      font-weight: 500;
      border: 1px solid rgba(148,163,184,0.25);
      background: radial-gradient(circle at top left, rgba(248,250,252,0.05), transparent 55%);
      color: var(--text-main);
      cursor: pointer;
      display: flex;
      align-items: flex-start;
      gap: 6px;
      line-height: 1.3;
      box-shadow: 0 6px 18px rgba(0,0,0,0.4);
      transition: transform 0.08s ease, box-shadow 0.08s ease,
                  border-color 0.08s ease, background 0.08s ease, opacity 0.08s ease;
    }

    .tile span.emoji {
      font-size: 16px;
      flex-shrink: 0;
      margin-top: -1px;
    }

    .tile span.label {
      flex: 1;
    }

    .tile:active {
      transform: translateY(1px) scale(0.99);
      box-shadow: 0 3px 10px rgba(0,0,0,0.4);
      border-color: rgba(248,250,252,0.25);
      background: radial-gradient(circle at top left, rgba(248,250,252,0.1), transparent 55%);
    }

    .tile.orange {
      border-color: rgba(248, 148, 48, 0.45);
      background: radial-gradient(circle at top left, rgba(248, 148, 48, 0.18), transparent 60%);
    }

    .tile.blue {
      border-color: rgba(56, 189, 248, 0.45);
      background: radial-gradient(circle at top left, rgba(56, 189, 248, 0.16), transparent 60%);
    }

    .tile.green {
      border-color: rgba(52, 211, 153, 0.45);
      background: radial-gradient(circle at top left, rgba(52, 211, 153, 0.14), transparent 60%);
    }

    .tile.rose {
      border-color: rgba(251, 113, 133, 0.45);
      background: radial-gradient(circle at top left, rgba(251, 113, 133, 0.18), transparent 60%);
    }

    .tile.selected {
      outline: 2px solid #f97316;
      outline-offset: 1px;
      opacity: 1;
    }

    .hint {
      font-size: 11px;
      color: var(--text-muted);
      margin-top: 2px;
    }

    .verse-box {
      margin-top: 4px;
      padding: 8px;
      border-radius: 12px;
      background: rgba(15,23,42,0.9);
      border: 1px solid #1f2937;
      font-size: 13px;
      color: #e5e7eb;
      white-space: pre-wrap;
    }

    .verse-ref {
      font-size: 12px;
      color: var(--accent-rose);
      margin-bottom: 2px;
    }

    .verse-text {
      font-size: 13px;
      margin-bottom: 6px;
    }

    .nav-row {
      display: flex;
      justify-content: space-between;
      gap: 8px;
      margin-top: 6px;
    }

    .nav-btn {
      flex: 1;
      border-radius: 999px;
      padding: 8px 10px;
      font-size: 13px;
      border: none;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 4px;
    }

    .nav-btn span.icon {
      font-size: 14px;
    }

    .nav-btn.secondary {
      background: rgba(15,23,42,0.9);
      color: var(--text-muted);
      border: 1px solid #1f2937;
    }

    .nav-btn.primary {
      background: var(--accent-orange);
      color: #111827;
      font-weight: 600;
    }

    footer {
      font-size: 11px;
      color: var(--text-muted);
      text-align: center;
      padding-bottom: 4px;
    }

    @media (max-width: 380px) {
      .tile-grid {
        grid-template-columns: repeat(1, minmax(0, 1fr));
      }
    }
  </style>
</head>
<body>
<div class="app">
  <header>
    <h1>Emotionen & Bibel</h1>
    <p>Benenn, was du f√ºhlst ‚Äì und lass dich vom Wort Gottes st√§rken.</p>
  </header>

  <div class="card">
    <div class="badge-row">
      <div class="badge">
        <div class="badge-dot"></div>
        <span id="badge-label">Schritt 1 ¬∑ Auswahl</span>
      </div>
      <div class="badge-soft" id="secondary-label"></div>
    </div>

    <div class="title" id="title">Welche Emotionen sp√ºrst du gerade?</div>
    <div class="calm-phrase" id="calm-phrase"></div>
    <div class="text" id="description"></div>

    <div class="tile-grid" id="tile-grid"></div>
    <div class="hint" id="hint"></div>

    <div class="verse-box" id="verse-box" style="display:none;">
      <div class="verse-ref" id="verse-ref"></div>
      <div class="verse-text" id="verse-text"></div>
      <div class="text" id="verse-expl"></div>
    </div>

    <div class="nav-row">
      <button class="nav-btn secondary" id="back-btn">
        <span class="icon">‚Üê</span><span>Zur√ºck</span>
      </button>
      <button class="nav-btn primary" id="next-btn">
        <span class="icon">‚û°Ô∏è</span><span id="next-label">Weiter</span>
      </button>
    </div>
  </div>

  <footer>
    Du musst nicht alles im Griff haben. Es reicht, wenn du ehrlich bist ‚Äì Gott sieht dein Herz.
  </footer>
</div>

<script>
  const calmPhrases = [
    "Du musst jetzt nichts leisten ‚Äì du darfst einfach nur da sein.",
    "Gott ist nicht √ºberrascht von deinen Gef√ºhlen.",
    "Dein Herz darf ehrlich sein, auch wenn es chaotisch ist.",
    "Wut, Trauer, Angst ‚Äì nichts davon trennt dich von Gottes Liebe.",
    "Ein tiefer Atemzug ist auch ein Gebet: ‚ÄûHerr, hilf mir.‚Äú",
    "Du musst heute nicht perfekt reagieren. Echt reicht.",
    "Selbst im Sturm sieht Gott dich klarer als du dich selbst."
  ];

  const EMOTIONS = [
    {
      id: "wut",
      label: "w√ºtend",
      display: "Wut / √Ñrger",
      emoji: "üî•",
      color: "orange",
      verseRef: "Epheser 4,26",
      verseText: "Z√ºrnt ihr, so s√ºndigt nicht; die Sonne gehe nicht unter √ºber eurem Zorn.",
      expl: "Gott sagt nicht: ‚ÄûDu darfst nie w√ºtend sein.‚Äú Er nimmt deine Wut ernst. Aber er l√§dt dich ein, sie nicht in dir festzuhalten, bis sie dich oder andere zerst√∂rt. Deine Wut zeigt, dass dir etwas wichtig ist ‚Äì Respekt, Gerechtigkeit, N√§he. Du darfst damit zu ihm kommen, bevor du Menschen verletzt oder dich selbst kaputt machst. Du musst das nicht allein ordnen. Du darfst sagen: ‚ÄûHerr, du siehst, wie es in mir kocht. Hilf mir, wahr zu reden, ohne zu verletzen.‚Äú"
    },
    {
      id: "angst",
      label: "√§ngstlich",
      display: "Angst / Unsicherheit",
      emoji: "üò∞",
      color: "blue",
      verseRef: "Jesaja 41,10",
      verseText: "F√ºrchte dich nicht, denn ich bin mit dir; weiche nicht, denn ich bin dein Gott.",
      expl: "Angst ist kein Zeichen, dass du zu wenig glaubst. Angst zeigt, wie verletzlich du bist. Gott macht dir keine Vorw√ºrfe ‚Äì er verspricht N√§he. Er sagt nicht: ‚ÄûRei√ü dich zusammen‚Äú, sondern: ‚ÄûIch bin mit dir.‚Äú Vielleicht √§ndert er nicht sofort die Situation, aber er tr√§gt dich mitten hindurch. Du darfst √§ngstlich und gleichzeitig gehalten sein. Deine Angst ist bei ihm nicht zu viel."
    },
    {
      id: "traurigkeit",
      label: "traurig",
      display: "Traurigkeit",
      emoji: "üò¢",
      color: "rose",
      verseRef: "Psalm 34,19",
      verseText: "Der HERR ist nahe denen, die zerbrochenen Herzens sind.",
      expl: "Traurigkeit hei√üt: Etwas in dir nimmt ernst, was du verloren hast oder nie hattest. Gott l√§uft an deiner Trauer nicht vorbei. Er setzt sich innerlich neben dich. Du musst sie nicht runterdr√ºcken, um ‚Äûstark‚Äú zu sein. Tr√§nen sind bei ihm kein Versagen, sondern Wahrheit. Er sieht jedes St√ºck deines gebrochenen Herzens ‚Äì und er sch√§mt sich nicht f√ºr dich."
    },
    {
      id: "ueberfordert",
      label: "√ºberfordert",
      display: "√úberforderung",
      emoji: "üß†",
      color: "green",
      verseRef: "Matth√§us 11,28",
      verseText: "Kommt her zu mir, alle, die ihr m√ºhselig und beladen seid; ich will euch erquicken.",
      expl: "√úberfordert zu sein hei√üt nicht, dass du versagt hast. Es hei√üt oft, dass du zu lange zu viel getragen hast. Jesus l√§dt gerade die M√ºden ein ‚Äì nicht die Souver√§nen. Du musst nicht jede Erwartung erf√ºllen. Du darfst ‚Äûzu viel‚Äú sp√ºren und damit zu ihm kommen. Vielleicht ist sein erster Schritt nicht: ‚ÄûMach weiter‚Äú, sondern: ‚ÄûLeg ab, atme, ich bin da.‚Äú"
    },
    {
      id: "scham",
      label: "besch√§mt / schuldig",
      display: "Scham / Schuldgef√ºhle",
      emoji: "üôà",
      color: "blue",
      verseRef: "R√∂mer 8,1",
      verseText: "So gibt es nun keine Verdammnis f√ºr die, die in Christus Jesus sind.",
      expl: "Scham fl√ºstert dir: ‚ÄûMit dir stimmt etwas nicht. Du bist falsch.‚Äú Gott trennt aber klar zwischen dem, was du getan hast, und dem, wer du bist. Er sieht deine Fehler genauer als du ‚Äì und trotzdem spricht er keine Verdammnis √ºber dich, wenn du zu Jesus geh√∂rst. Du darfst deine Schuld benennen, aber du musst dich nicht mehr selber verurteilen. Seine Stimme ist tiefer als dein innerer Ankl√§ger."
    },
    {
      id: "einsam",
      label: "einsam",
      display: "Einsamkeit",
      emoji: "üåí",
      color: "rose",
      verseRef: "Psalm 27,10",
      verseText: "Wenn Vater und Mutter mich verlassen, so nimmt doch der HERR mich auf.",
      expl: "Einsamkeit ist brutal, weil sie dir sagt: ‚ÄûIch bin unwichtig. Keiner sieht mich.‚Äú Gott widerspricht dieser L√ºge. Selbst wenn Menschen dich √ºbersehen oder verlassen haben ‚Äì er tut es nicht. Er ist nicht nur theoretisch da, sondern pers√∂nlich interessiert an dir. Du darfst ihm sagen: ‚ÄûIch f√ºhle mich allein‚Äú, ohne dass er dich abwertet. Bei ihm bist du gewollt, nicht geduldet."
    },
    {
      id: "enttaeuschung",
      label: "entt√§uscht",
      display: "Entt√§uschung",
      emoji: "üíî",
      color: "orange",
      verseRef: "Spr√ºche 13,12",
      verseText: "Hingezogene Hoffnung macht das Herz krank.",
      expl: "Entt√§uschung zeigt, dass du gehofft hast. Dass du geglaubt hast, etwas k√∂nnte sch√∂n, heil oder anders werden. Gott macht dieses Hoffen nicht l√§cherlich. Er kennt dein krankes Herz, das m√ºde geworden ist. Bei ihm darfst du ehrlich sagen: ‚ÄûIch hatte mir mehr erhofft.‚Äú Er nimmt deine Erwartungen ernst ‚Äì und er bleibt auch dann, wenn Menschen sie nicht erf√ºllt haben."
    }
  ];

  const state = {
    screen: "select", // "select" | "intensity" | "result"
    selectedIds: [],
    activeEmotionId: null
  };

  const badgeLabelEl = document.getElementById("badge-label");
  const secondaryLabelEl = document.getElementById("secondary-label");
  const titleEl = document.getElementById("title");
  const descEl = document.getElementById("description");
  const calmEl = document.getElementById("calm-phrase");
  const gridEl = document.getElementById("tile-grid");
  const hintEl = document.getElementById("hint");
  const verseBoxEl = document.getElementById("verse-box");
  const verseRefEl = document.getElementById("verse-ref");
  const verseTextEl = document.getElementById("verse-text");
  const verseExplEl = document.getElementById("verse-expl");
  const backBtn = document.getElementById("back-btn");
  const nextBtn = document.getElementById("next-btn");
  const nextLabelEl = document.getElementById("next-label");

  function randomPhrase() {
    return calmPhrases[Math.floor(Math.random() * calmPhrases.length)];
  }

  function getEmotionById(id) {
    return EMOTIONS.find(e => e.id === id) || null;
  }

  function render() {
    calmEl.textContent = randomPhrase();
    gridEl.innerHTML = "";
    verseBoxEl.style.display = "none";
    hintEl.textContent = "";
    secondaryLabelEl.textContent = "";

    if (state.screen === "select") {
      badgeLabelEl.textContent = "Schritt 1 ¬∑ Auswahl";
      titleEl.textContent = "Welche Emotionen sp√ºrst du gerade?";
      descEl.textContent =
        "Tippe auf die Kacheln, die zu deinem Inneren passen. Du kannst bis zu drei ausw√§hlen. Es muss nicht perfekt sein ‚Äì dein Gef√ºhl reicht.";
      nextLabelEl.textContent = "Weiter";
      backBtn.disabled = true;
      backBtn.style.opacity = 0.4;

      EMOTIONS.forEach((emo) => {
        const btn = document.createElement("button");
        const isSelected = state.selectedIds.includes(emo.id);
        btn.className = "tile " + emo.color + (isSelected ? " selected" : "");
        btn.innerHTML = `
          <span class="emoji">${emo.emoji}</span>
          <span class="label">${emo.display}</span>
        `;
        btn.addEventListener("click", () => {
          toggleEmotion(emo.id);
        });
        gridEl.appendChild(btn);
      });

      hintEl.textContent = "Du kannst 1‚Äì3 Emotionen w√§hlen. Danach unten auf ‚ÄûWeiter‚Äú tippen.";

    } else if (state.screen === "intensity") {
      badgeLabelEl.textContent = "Schritt 2 ¬∑ Gewichtung";
      backBtn.disabled = false;
      backBtn.style.opacity = 1;
      nextLabelEl.textContent = "Weiter";

      const selected = state.selectedIds.map(getEmotionById).filter(Boolean);
      secondaryLabelEl.textContent = `${selected.length} ausgew√§hlt`;

      if (selected.length === 1) {
        const emo = selected[0];
        // Text f√ºr NUR EINE Emotion
        titleEl.textContent = "Du hast diese Emotion gew√§hlt:";
        descEl.textContent =
          `Du bist gerade ${emo.label}.\n\nWir schauen gleich, was Gott dir genau in diesem Gef√ºhl sagen m√∂chte. Tippe unten auf ‚ÄûWeiter‚Äú.`;
        // keine extra Auswahl n√∂tig
        state.activeEmotionId = emo.id;
        gridEl.innerHTML = "";
        hintEl.textContent = "Wenn du bereit bist, tippe auf ‚ÄûWeiter‚Äú.";

      } else {
        // 2 oder 3 Emotionen ‚Üí wie bisher
        titleEl.textContent = "Welche davon f√ºhlt sich gerade am intensivsten an?";
        descEl.textContent =
          "Manchmal sind mehrere Gef√ºhle da. W√§hle die Emotion, die gerade am deutlichsten in dir schreit.";

        selected.forEach((emo) => {
          const btn = document.createElement("button");
          const isActive = state.activeEmotionId === emo.id;
          btn.className = "tile " + emo.color + (isActive ? " selected" : "");
          btn.innerHTML = `
            <span class="emoji">${emo.emoji}</span>
            <span class="label">${emo.display}</span>
          `;
          btn.addEventListener("click", () => {
            state.activeEmotionId = emo.id;
            render();
          });
          gridEl.appendChild(btn);
        });

        hintEl.textContent = "Tippe die Emotion an, die sich im Moment am st√§rksten anf√ºhlt.";
      }

    } else if (state.screen === "result") {
      const emo = getEmotionById(state.activeEmotionId);
      badgeLabelEl.textContent = "Schritt 3 ¬∑ Zuspruch";
      backBtn.disabled = false;
      backBtn.style.opacity = 1;
      nextLabelEl.textContent = "Neue Auswahl";

      if (!emo) {
        titleEl.textContent = "Etwas ist schiefgelaufen.";
        descEl.textContent = "Geh bitte zur√ºck und w√§hle deine Emotionen noch einmal aus.";
        verseBoxEl.style.display = "none";
        return;
      }

      titleEl.textContent = "Du bist gerade so unterwegs:";
      descEl.textContent =
        `Du bist gerade ${emo.label}.\n\nUnd genau so, in diesem Gef√ºhl, sieht Gott dich und m√∂chte zu dir sprechen.`;

      verseBoxEl.style.display = "block";
      verseRefEl.textContent = emo.verseRef;
      verseTextEl.textContent = emo.verseText;
      verseExplEl.textContent = emo.expl;

      gridEl.innerHTML = "";
      hintEl.textContent =
        "Lies langsam. Du musst nichts leisten. Lass die Worte einfach kurz bei dir ankommen.";
    }
  }

  function toggleEmotion(id) {
    const idx = state.selectedIds.indexOf(id);
    if (idx !== -1) {
      state.selectedIds.splice(idx, 1);
    } else {
      if (state.selectedIds.length >= 3) {
        hintEl.textContent = "Maximal drei Emotionen gleichzeitig ‚Äì sonst wird es zu voll. üôÇ";
        return;
      }
      state.selectedIds.push(id);
    }
    render();
  }

  function goNext() {
    if (state.screen === "select") {
      if (state.selectedIds.length === 0) {
        hintEl.textContent = "W√§hle mindestens eine Emotion aus, damit wir weitermachen k√∂nnen.";
        return;
      }
      state.screen = "intensity";
      // bei genau einer Emotion direkt setzen
      if (state.selectedIds.length === 1) {
        state.activeEmotionId = state.selectedIds[0];
      } else {
        state.activeEmotionId = null;
      }
      render();

    } else if (state.screen === "intensity") {
      if (!state.activeEmotionId) {
        hintEl.textContent = "W√§hle eine Emotion aus, bevor du weitergehst.";
        return;
      }
      state.screen = "result";
      render();

    } else if (state.screen === "result") {
      // Neustart
      state.screen = "select";
      state.selectedIds = [];
      state.activeEmotionId = null;
      render();
    }
  }

  function goBack() {
    if (state.screen === "select") return;

    if (state.screen === "intensity") {
      state.screen = "select";
      state.activeEmotionId = null;

    } else if (state.screen === "result") {
      if (state.selectedIds.length === 1) {
        // bei einer Emotion zur√ºck zur Auswahl
        state.screen = "select";
        state.activeEmotionId = null;
      } else {
        // bei mehreren wieder zur Intensit√§t
        state.screen = "intensity";
        state.activeEmotionId = null;
      }
    }
    render();
  }

  backBtn.addEventListener("click", goBack);
  nextBtn.addEventListener("click", goNext);

  // Start
  state.screen = "select";
  render();
</script>
</body>
</html>
